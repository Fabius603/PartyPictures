{% extends "gallery/base.html" %}
{% load static %}

{% block title %}Einstellungen{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'gallery/css/settings.css' %}">
{% endblock %}

{% block content %}
<a href="{% url 'menu' %}" class="btn-back">⬅️ Zurück zum Menü</a>

<h1>Einstellungen</h1>

{% for msg in messages %}
<p>{{ msg }}</p>
{% endfor %}

<form method="post">
    {% csrf_token %}
    <label for="speed">Anzeigedauer pro Bild (Sekunden):</label>
    <input type="number" id="speed" name="speed" value="{{ speed }}" min="1">

    <label for="cooldown">Upload-Wartezeit (Sekunden):</label>
    <input type="number" id="cooldown" name="cooldown" value="{{ cooldown }}" min="1">

    <button type="submit">Speichern</button>
</form>

<h2>Bilder</h2>
<form method="post">
    {% csrf_token %}
    <button name="disable_all" onclick="return confirm('Alle Bilder deaktivieren?');">
        Alle Bilder deaktivieren
    </button>
</form>

<div class="gallery-grid">
    {% for img in images %}
    <div class="gallery-item">
        <img src="{{ img.image.url }}">
        <p>Status: {{ img.approved|yesno:"✅ Aktiviert,⛔️ Deaktiviert" }}</p>

        {% if img.approved %}
        <form method="post">
            {% csrf_token %}
            <button name="disable_image" value="{{ img.id }}" class="btn-red">Deaktivieren</button>
        </form>
        {% else %}
        <form method="post">
            {% csrf_token %}
            <button name="enable_image" value="{{ img.id }}" class="btn-blue">Aktivieren</button>
        </form>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}